@page "/events"
@inject NavigationManager Navigation

<PageTitle>Events</PageTitle>

<h1>Upcoming Events</h1>

<nav class="mb-4">
    <a class="btn btn-link" href="/">Home</a>
    <a class="btn btn-link" href="/register">Register</a>
</nav>

<div class="d-flex flex-wrap gap-3">
    @foreach (var ev in events)
    {
        <div @onclick="() => NavigateToDetails(ev.Name)" style="cursor:pointer;">
            <EventCard EventName="@ev.Name"
                       EventDate="@ev.Date"
                       Location="@ev.Location"
                       Description="@ev.Description" />
        </div>
    }
</div>

@code {
    public class EventModel
    {
        public string Name { get; set; } = string.Empty;
        public DateTime Date { get; set; }
        public string Location { get; set; } = string.Empty;
        public string? Description { get; set; }
    }

    private List<EventModel> events = new()
    {
        new EventModel
        {
            Name = "Corporate Gala",
            Date = DateTime.Now.AddDays(10),
            Location = "Grand Ballroom",
            Description = "An evening of networking and celebration."
        },
        new EventModel
        {
            Name = "Tech Conference",
            Date = DateTime.Now.AddDays(30),
            Location = "Convention Center",
            Description = "Explore the latest in technology trends."
        },
        new EventModel
        {
            Name = "Charity Auction",
            Date = DateTime.Now.AddDays(45),
            Location = "City Hall",
            Description = "Support local causes and win great prizes."
        }
    };

    private void NavigateToDetails(string eventName)
    {
        // Pass event name as a route parameter (URL encoded)
        Navigation.NavigateTo($"/events/details/{Uri.EscapeDataString(eventName)}");
    }
}